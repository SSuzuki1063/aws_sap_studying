<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Cognito ユーザープールとIDプールの違い</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            color: #333;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #232f3e, #2c3e50);
            color: white;
            padding: 20px;
            text-align: center;
        }
        h1 {
            margin: 0;
            font-size: 28px;
        }
        .intro {
            padding: 20px;
            background-color: #f0f8ff;
            text-align: center;
            border-bottom: 1px solid #e1e4e8;
        }
        .main-content {
            display: flex;
            flex-wrap: wrap;
        }
        .column {
            flex: 1;
            min-width: 300px;
            padding: 20px;
            position: relative;
        }
        .user-pool {
            background-color: #e6f7ff;
            border-right: 1px solid #e1e4e8;
        }
        .identity-pool {
            background-color: #fff1e6;
        }
        h2 {
            color: #232f3e;
            margin-top: 0;
            display: flex;
            align-items: center;
            font-size: 22px;
        }
        .icon {
            width: 40px;
            height: 40px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            background-color: #232f3e;
            color: white;
            border-radius: 50%;
            font-size: 20px;
        }
        .feature-list {
            margin-top: 20px;
        }
        .feature-item {
            margin-bottom: 15px;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .identity-pool .feature-item {
            background-color: #fffaf6;
        }
        .user-pool .feature-item {
            background-color: #f6fbff;
        }
        .feature-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        .comparison {
            padding: 20px;
            background-color: #f8f9fa;
            border-top: 1px solid #e1e4e8;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .comparison-table th, .comparison-table td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid #ddd;
        }
        .comparison-table th {
            background-color: #232f3e;
            color: white;
        }
        .comparison-table tr:nth-child(odd) {
            background-color: #f2f2f2;
        }
        .flow-diagram {
            padding: 20px;
            text-align: center;
        }
        .flow-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .flow-box {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            margin: 10px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .flow-box.user-flow {
            border-top: 5px solid #4c9aff;
        }
        .flow-box.id-flow {
            border-top: 5px solid #ff9d4c;
        }
        .flow-arrow {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            color: #666;
            font-size: 24px;
        }
        .conclusion {
            padding: 20px;
            background-color: #232f3e;
            color: white;
            text-align: center;
        }
        footer {
            text-align: center;
            padding: 10px;
            color: #666;
            font-size: 12px;
        }
        @media (max-width: 768px) {
            .column {
                flex: 100%;
            }
            .user-pool {
                border-right: none;
                border-bottom: 1px solid #e1e4e8;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>AWS Cognito ユーザープールとIDプールの違い</h1>
        </header>
        
        <div class="intro">
            <p>AWS Cognitoは、ウェブおよびモバイルアプリケーション向けの認証・認可・ユーザー管理サービスです。<br>主に「ユーザープール」と「IDプール（アイデンティティプール）」の2つのコンポーネントから構成されています。</p>
        </div>
        
        <div class="main-content">
            <div class="column user-pool">
                <h2><span class="icon">U</span>ユーザープール</h2>
                <p>ユーザープールは、<strong>ユーザーディレクトリ</strong>であり、アプリのユーザー登録と認証機能を提供します。</p>
                
                <div class="feature-list">
                    <div class="feature-item">
                        <div class="feature-title">主な機能:</div>
                        <p>ユーザー登録、サインイン、アカウント回復</p>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-title">認証方法:</div>
                        <p>ユーザー名/パスワード、Eメール、電話番号、ソーシャルIDプロバイダー（Facebook, Google, Appleなど）、SAML、OIDC</p>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-title">セキュリティ機能:</div>
                        <p>多要素認証（MFA）、適応型認証、パスワードポリシー</p>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-title">認証結果:</div>
                        <p>JWT（JSON Web Token）の発行 - IDトークン、アクセストークン、更新トークン</p>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-title">ユースケース:</div>
                        <p>ユーザーアカウント管理、認証・認可の一元化、セキュアなAPIアクセス</p>
                    </div>
                </div>
            </div>
            
            <div class="column identity-pool">
                <h2><span class="icon">I</span>IDプール（アイデンティティプール）</h2>
                <p>IDプールは、<strong>AWS リソースへのアクセス権を付与</strong>するためのものです。一時的なAWSの認証情報を提供します。</p>
                
                <div class="feature-list">
                    <div class="feature-item">
                        <div class="feature-title">主な機能:</div>
                        <p>一時的なAWS認証情報（IAMロール）の提供</p>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-title">認証方法:</div>
                        <p>匿名アクセス、Cognitoユーザープール、ソーシャルIDプロバイダー、カスタム認証</p>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-title">セキュリティ機能:</div>
                        <p>きめ細かなアクセス制御、ロールベースの権限管理</p>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-title">認証結果:</div>
                        <p>AWS STS（Security Token Service）による一時的な認証情報（アクセスキー、シークレットキー、セッショントークン）</p>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-title">ユースケース:</div>
                        <p>S3, DynamoDB, Lambda などのAWSサービスへの直接アクセス、アプリケーションからAWSリソースへの安全なアクセス</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="comparison">
            <h2>主な違いの比較</h2>
            <table class="comparison-table">
                <tr>
                    <th>特徴</th>
                    <th>ユーザープール</th>
                    <th>IDプール</th>
                </tr>
                <tr>
                    <td>主な目的</td>
                    <td>ユーザー認証（Authentication）</td>
                    <td>AWSリソースへのアクセス許可（Authorization）</td>
                </tr>
                <tr>
                    <td>発行する認証情報</td>
                    <td>JWTトークン</td>
                    <td>AWS一時認証情報</td>
                </tr>
                <tr>
                    <td>アクセス対象</td>
                    <td>アプリケーション、APIなど</td>
                    <td>AWSサービス（S3, DynamoDB, Lambdaなど）</td>
                </tr>
                <tr>
                    <td>ユーザー管理</td>
                    <td>あり（登録、プロファイル管理など）</td>
                    <td>なし（ユーザー管理機能はない）</td>
                </tr>
                <tr>
                    <td>匿名アクセス</td>
                    <td>サポートなし</td>
                    <td>サポートあり</td>
                </tr>
            </table>
        </div>
        
        <div class="flow-diagram">
            <h2>よくある利用フロー</h2>
            
            <div class="flow-container">
                <div class="flow-box user-flow">
                    <h3>ユーザーがアプリにサインイン</h3>
                    <p>ユーザープールでの認証</p>
                    <div class="flow-arrow">↓</div>
                </div>
                
                <div class="flow-box user-flow">
                    <h3>JWTトークンの取得</h3>
                    <p>ID、アクセス、更新トークン</p>
                    <div class="flow-arrow">↓</div>
                </div>
                
                <div class="flow-box id-flow">
                    <h3>IDプールでのトークン交換</h3>
                    <p>JWTトークンをAWS認証情報に交換</p>
                    <div class="flow-arrow">↓</div>
                </div>
                
                <div class="flow-box id-flow">
                    <h3>AWSサービスへのアクセス</h3>
                    <p>S3, DynamoDB, Lambda等</p>
                </div>
            </div>
        </div>
        
        <div class="conclusion">
            <h2>まとめ</h2>
            <p>
                ユーザープールは<strong>「誰であるか」の認証</strong>を担当し、<br>
                IDプールは<strong>「何ができるか」の認可</strong>を担当します。<br>
                多くの場合、これらは連携して使用され、完全な認証・認可ソリューションを提供します。
            </p>
        </div>
        
        <footer>
            Created on March 09, 2025
        </footer>
    </div>
</body>
</html>