<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS SQS Dead-letter Queue & Redrive Policy å®Œå…¨ã‚¬ã‚¤ãƒ‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #9333EA 50%, #0369A1 75%, #00f2fe 100%);
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 70px rgba(0,0,0,0.4);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #9333EA 100%);
            color: white;
            padding: 50px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: 'ğŸ“¬';
            position: absolute;
            font-size: 20em;
            opacity: 0.1;
            top: -50px;
            right: -50px;
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }
        
        .content {
            padding: 50px;
        }
        
        .intro {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 15px;
            border-left: 6px solid #CA8A04;
        }
        
        .intro h2 {
            color: #92400e;
            font-size: 2.2em;
            margin-bottom: 20px;
        }
        
        .intro-text {
            font-size: 1.2em;
            color: #78350f;
            line-height: 1.8;
        }
        
        .concept-section {
            background: linear-gradient(to bottom, #f8fafc 0%, white 100%);
            padding: 50px 40px;
            border-radius: 20px;
            margin: 50px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .concept-title {
            text-align: center;
            font-size: 2.5em;
            color: #1e293b;
            margin-bottom: 40px;
            font-weight: bold;
        }
        
        .analogy-box {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }
        
        .analogy-card {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-top: 6px solid;
            transition: all 0.3s ease;
        }
        
        .analogy-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }
        
        .analogy-card.restaurant {
            border-color: #CA8A04;
        }
        
        .analogy-card.aws {
            border-color: #3b82f6;
        }
        
        .analogy-icon {
            font-size: 4em;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .analogy-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #1e293b;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .analogy-content {
            color: #475569;
            line-height: 1.8;
            font-size: 1.05em;
        }
        
        .flow-diagram {
            background: white;
            padding: 50px 30px;
            border-radius: 20px;
            margin: 50px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .flow-title {
            text-align: center;
            font-size: 2.3em;
            color: #1e293b;
            margin-bottom: 50px;
            font-weight: bold;
        }
        
        .flow-steps {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(to right, #f8fafc 0%, white 100%);
            border-radius: 15px;
            border-left: 6px solid;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .flow-step:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        
        .flow-step:nth-child(1) { border-color: #047857; }
        .flow-step:nth-child(2) { border-color: #3b82f6; }
        .flow-step:nth-child(3) { border-color: #CA8A04; }
        .flow-step:nth-child(4) { border-color: #ef4444; }
        .flow-step:nth-child(5) { border-color: #8b5cf6; }
        
        .step-number {
            font-size: 3em;
            font-weight: bold;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 30px;
            flex-shrink: 0;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .flow-step:nth-child(1) .step-number { background: linear-gradient(135deg, #047857, #059669); }
        .flow-step:nth-child(2) .step-number { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .flow-step:nth-child(3) .step-number { background: linear-gradient(135deg, #CA8A04, #d97706); }
        .flow-step:nth-child(4) .step-number { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .flow-step:nth-child(5) .step-number { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }
        
        .step-content {
            flex: 1;
        }
        
        .step-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 10px;
        }
        
        .step-description {
            color: #475569;
            line-height: 1.7;
            font-size: 1.05em;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin: 40px 0;
        }
        
        .comparison-card {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-top: 6px solid;
        }
        
        .comparison-card.normal {
            border-color: #047857;
        }
        
        .comparison-card.problem {
            border-color: #ef4444;
        }
        
        .comparison-icon {
            font-size: 3.5em;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .comparison-title {
            font-size: 1.6em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #1e293b;
        }
        
        .comparison-items {
            color: #475569;
            line-height: 2;
            font-size: 1.05em;
        }
        
        .comparison-items li {
            margin-bottom: 12px;
            padding-left: 10px;
        }
        
        .config-section {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            padding: 50px 40px;
            border-radius: 20px;
            margin: 50px 0;
            border-left: 8px solid #3b82f6;
        }
        
        .config-title {
            color: #1e3a8a;
            font-size: 2.3em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: bold;
        }
        
        .config-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .config-card {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .config-card-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .config-param {
            background: #f0f9ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #3b82f6;
        }
        
        .param-name {
            font-weight: bold;
            color: #1e40af;
            font-size: 1.1em;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
        }
        
        .param-desc {
            color: #475569;
            line-height: 1.7;
        }
        
        .code-example {
            background: #1e293b;
            color: #f1f5f9;
            padding: 35px;
            border-radius: 15px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.8;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .code-title {
            color: #2563EB;
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        
        .code-comment { color: #64748B; }
        .code-keyword { color: #f472b6; }
        .code-string { color: #34d399; }
        .code-number { color: #CA8A04; }
        .code-property { color: #2563EB; }
        
        .use-case-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 50px 40px;
            border-radius: 20px;
            margin: 50px 0;
            border-left: 8px solid #CA8A04;
        }
        
        .use-case-title {
            color: #92400e;
            font-size: 2.3em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: bold;
        }
        
        .use-case-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .use-case-card {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }
        
        .use-case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(245, 158, 11, 0.3);
        }
        
        .use-case-icon {
            font-size: 3.5em;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .use-case-card h4 {
            color: #92400e;
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .use-case-content {
            color: #78350f;
            line-height: 1.8;
        }
        
        .best-practices {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            padding: 50px 40px;
            border-radius: 20px;
            margin: 50px 0;
            border-left: 8px solid #047857;
        }
        
        .best-practices-title {
            color: #065f46;
            font-size: 2.3em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: bold;
        }
        
        .practice-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }
        
        .practice-item {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .practice-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .practice-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #065f46;
            margin-bottom: 12px;
        }
        
        .practice-desc {
            color: #475569;
            line-height: 1.7;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            padding: 35px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 6px solid #ef4444;
        }
        
        .warning-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #991b1b;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .warning-content {
            color: #7f1d1d;
            line-height: 1.8;
            font-size: 1.05em;
        }
        
        .tip-box {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            padding: 35px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 6px solid #6366f1;
        }
        
        .tip-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #3730a3;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tip-content {
            color: #312e81;
            line-height: 1.8;
            font-size: 1.05em;
        }
        
        .visual-diagram {
            background: white;
            padding: 50px 30px;
            border-radius: 20px;
            margin: 50px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .diagram-title {
            text-align: center;
            font-size: 2.3em;
            color: #1e293b;
            margin-bottom: 50px;
            font-weight: bold;
        }
        
        .diagram-container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
        }
        
        .diagram-row {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 40px 0;
            gap: 20px;
        }
        
        .diagram-box {
            background: linear-gradient(135deg, #f8fafc 0%, white 100%);
            padding: 25px 35px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            text-align: center;
            min-width: 200px;
            border: 3px solid;
            transition: all 0.3s ease;
        }
        
        .diagram-box:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .diagram-box.source {
            border-color: #047857;
        }
        
        .diagram-box.queue {
            border-color: #3b82f6;
        }
        
        .diagram-box.dlq {
            border-color: #ef4444;
        }
        
        .diagram-box.consumer {
            border-color: #8b5cf6;
        }
        
        .diagram-box-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .diagram-box-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 8px;
        }
        
        .diagram-box-subtitle {
            font-size: 0.9em;
            color: #64748b;
        }
        
        .diagram-arrow {
            font-size: 3em;
            color: #64748B;
        }
        
        .diagram-label {
            position: absolute;
            background: #fef3c7;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9em;
            color: #92400e;
            font-weight: bold;
            border: 2px solid #CA8A04;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .analogy-box,
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .config-cards,
            .use-case-grid,
            .practice-items {
                grid-template-columns: 1fr;
            }
            
            .diagram-row {
                flex-direction: column;
            }
            
            .diagram-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>

<!-- å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ç›®æ¬¡ -->
<div id="sidebar-toc" class="sidebar-toc">
    <div class="sidebar-toc-header">
        <h2>ğŸ“‘ ç›®æ¬¡</h2>
    </div>
    <nav class="sidebar-toc-content">
        <ul>
            <li class="toc-h2"><a href="#ç›®æ¬¡">ğŸ“‘ ç›®æ¬¡</a></li>
            <li class="toc-h2"><a href="#ï¸-ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ ã§ä¾‹ãˆã‚‹ã¨è¶…ã‚ã‹ã‚Šã‚„ã™ã„!">ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ ã§ä¾‹ãˆã‚‹ã¨è¶…ã‚ã‹ã‚Šã‚„ã™ã„!</a></li>
            <li class="toc-h2"><a href="#åŸºæœ¬æ¦‚å¿µ-ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³-vs-AWS">ğŸ“š åŸºæœ¬æ¦‚å¿µï¼šãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ vs AWS</a></li>
            <li class="toc-h2"><a href="#å…¨ä½“ã®æµã‚Œ---ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å›³è§£">ğŸ¨ å…¨ä½“ã®æµã‚Œ - ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å›³è§£</a></li>
            <li class="toc-h2"><a href="#ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ•ãƒ­ãƒ¼-5ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—">ğŸ”„ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ•ãƒ­ãƒ¼ï¼š5ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—</a></li>
            <li class="toc-h2"><a href="#âš–ï¸-æ­£å¸¸å‡¦ç†-vs-å•é¡Œç™ºç”Ÿæ™‚ã®é•ã„">âš–ï¸ æ­£å¸¸å‡¦ç† vs å•é¡Œç™ºç”Ÿæ™‚ã®é•ã„</a></li>
            <li class="toc-h3"><a href="#âš™ï¸-Redrive-Policy-è¨­å®šæ–¹æ³•">âš™ï¸ Redrive Policy è¨­å®šæ–¹æ³•</a></li>
            <li class="toc-h3"><a href="#å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹">ğŸ’¼ å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹</a></li>
            <li class="toc-h3"><a href="#âœ…-ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹">âœ… ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</a></li>
            <li class="toc-h2"><a href="#ã¾ã¨ã‚">ğŸ“ ã¾ã¨ã‚</a></li>
            <li class="toc-h3"><a href="#ï¸-ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®å•é¡Œæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ -=-SQS-DLQ">ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®å•é¡Œæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ  = SQS DLQ</a></li>
        </ul>
    </nav>
</div>

    <!-- AWS å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚è€ƒãƒªãƒ³ã‚¯ -->
    <div class="aws-references-section" style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-radius: 20px; padding: 50px; margin: 50px 0 30px 0; border-left: 8px solid #dc7600; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
        <div style="text-align: center; margin-bottom: 40px;">
            <h2 style="color: #232F3E; font-size: 2.2em; margin-bottom: 15px; font-weight: bold;">ğŸ“š AWS å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚è€ƒãƒªãƒ³ã‚¯</h2>
            <p style="color: #374151; font-size: 1.1em; opacity: 0.9;">ã•ã‚‰ã«è©³ã—ã„æƒ…å ±ã¯ã€AWSå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”è¦§ãã ã•ã„</p>
        </div>

        <div class="references-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 30px;">
            <!-- ã‚«ãƒ¼ãƒ‰1: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰ -->
            <div class="reference-card" style="background: white; border-radius: 15px; padding: 30px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; border-top: 4px solid #dc7600;">
                <div style="font-size: 2.5em; text-align: center; margin-bottom: 15px;">ğŸ“–</div>
                <h3 style="color: #232F3E; font-size: 1.3em; font-weight: bold; margin-bottom: 15px; text-align: center;">AWS ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰</h3>
                <p style="color: #6B7280; line-height: 1.7; margin-bottom: 20px; text-align: center; font-size: 0.95em;">AWSã®å®Œå…¨ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</p>
                <a href="https://docs.aws.amazon.com/" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px; background: linear-gradient(135deg, #dc7600 0%, #ff9900 100%); color: white; text-decoration: none; padding: 12px 25px; border-radius: 25px; font-weight: 600; transition: all 0.3s ease; width: 100%;">
                    ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ <span style="font-size: 1.1em;">â†—</span>
                </a>
            </div>

            <!-- ã‚«ãƒ¼ãƒ‰2: APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ -->
            <div class="reference-card" style="background: white; border-radius: 15px; padding: 30px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; border-top: 4px solid #dc7600;">
                <div style="font-size: 2.5em; text-align: center; margin-bottom: 15px;">âš™ï¸</div>
                <h3 style="color: #232F3E; font-size: 1.3em; font-weight: bold; margin-bottom: 15px; text-align: center;">AWS API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h3>
                <p style="color: #6B7280; line-height: 1.7; margin-bottom: 20px; text-align: center; font-size: 0.95em;">APIã®è©³ç´°ä»•æ§˜ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼</p>
                <a href="https://docs.aws.amazon.com/" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px; background: linear-gradient(135deg, #dc7600 0%, #ff9900 100%); color: white; text-decoration: none; padding: 12px 25px; border-radius: 25px; font-weight: 600; transition: all 0.3s ease; width: 100%;">
                    APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’è¦‹ã‚‹ <span style="font-size: 1.1em;">â†—</span>
                </a>
            </div>

            <!-- ã‚«ãƒ¼ãƒ‰3: FAQ -->
            <div class="reference-card" style="background: white; border-radius: 15px; padding: 30px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; border-top: 4px solid #dc7600;">
                <div style="font-size: 2.5em; text-align: center; margin-bottom: 15px;">ğŸ’¡</div>
                <h3 style="color: #232F3E; font-size: 1.3em; font-weight: bold; margin-bottom: 15px; text-align: center;">ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰</h3>
                <p style="color: #6B7280; line-height: 1.7; margin-bottom: 20px; text-align: center; font-size: 0.95em;">ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹ã‚ˆãã‚ã‚‹è³ªå•ã¨å›ç­”</p>
                <a href="https://aws.amazon.com/faqs/" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px; background: linear-gradient(135deg, #dc7600 0%, #ff9900 100%); color: white; text-decoration: none; padding: 12px 25px; border-radius: 25px; font-weight: 600; transition: all 0.3s ease; width: 100%;">
                    FAQã‚’è¦‹ã‚‹ <span style="font-size: 1.1em;">â†—</span>
                </a>
            </div>

            <!-- ã‚«ãƒ¼ãƒ‰4: re:Inventå‹•ç”» -->
            <div class="reference-card" style="background: white; border-radius: 15px; padding: 30px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; border-top: 4px solid #dc7600;">
                <div style="font-size: 2.5em; text-align: center; margin-bottom: 15px;">ğŸ¥</div>
                <h3 style="color: #232F3E; font-size: 1.3em; font-weight: bold; margin-bottom: 15px; text-align: center;">AWS re:Invent ã‚»ãƒƒã‚·ãƒ§ãƒ³</h3>
                <p style="color: #6B7280; line-height: 1.7; margin-bottom: 20px; text-align: center; font-size: 0.95em;">æœ€æ–°ã®ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹</p>
                <a href="https://www.youtube.com/results?search_query=AWS+re:Invent+AWS" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px; background: linear-gradient(135deg, #dc7600 0%, #ff9900 100%); color: white; text-decoration: none; padding: 12px 25px; border-radius: 25px; font-weight: 600; transition: all 0.3s ease; width: 100%;">
                    å‹•ç”»ã‚’è¦‹ã‚‹ <span style="font-size: 1.1em;">â†—</span>
                </a>
            </div>
        </div>

        <style>
            .reference-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(220, 118, 0, 0.3);
            }

            @media (max-width: 768px) {
                .aws-references-section {
                    padding: 30px 20px !important;
                    margin: 30px 0 20px 0 !important;
                }

                .references-grid {
                    grid-template-columns: 1fr !important;
                    gap: 20px !important;
                }

                .reference-card {
                    padding: 25px !important;
                }
            }
        </style>
    </div>
    <!-- End AWS References -->

<!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼æŠ˜ã‚ŠãŸãŸã¿ãƒœã‚¿ãƒ³ -->
<button id="sidebar-toc-toggle" class="sidebar-toc-toggle" onclick="toggleSidebarTOC()" aria-label="ç›®æ¬¡ã‚’é–‹é–‰">
    <span id="sidebar-toc-toggle-icon">â—€</span>
</button>

<style>
    /* ãƒšãƒ¼ã‚¸å…¨ä½“ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
    body {
        padding-left: 360px;
        transition: padding-left 0.3s ease;
    }

    body.sidebar-collapsed {
        padding-left: 0;
    }

    /* å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ç›®æ¬¡ */
    .sidebar-toc {
        position: fixed;
        left: 0;
        top: 0;
        width: 340px;
        height: 100vh;
        background: linear-gradient(180deg, #f0f9ff 0%, #e0f2fe 100%);
        border-right: 4px solid #3b82f6;
        box-shadow: 4px 0 12px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
        transition: transform 0.3s ease;
        z-index: 1000;
        padding: 20px;
    }

    .sidebar-toc.collapsed {
        transform: translateX(-100%);
    }

    /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ˜ãƒƒãƒ€ãƒ¼ */
    .sidebar-toc-header {
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #3b82f6;
    }

    .sidebar-toc-header h2 {
        color: #1e40af;
        margin: 0;
        font-size: 1.4em;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    /* ç›®æ¬¡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .sidebar-toc-content ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .sidebar-toc-content a {
        color: #1e40af;
        text-decoration: none;
        display: block;
        padding: 10px 12px;
        border-radius: 8px;
        margin: 6px 0;
        transition: all 0.2s ease;
        font-size: 0.95em;
        line-height: 1.4;
    }

    .sidebar-toc-content a:hover {
        background: rgba(59, 130, 246, 0.15);
        color: #2563eb;
        transform: translateX(5px);
    }

    /* h2ã¨h3ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .sidebar-toc-content .toc-h2 {
        font-weight: 600;
        font-size: 1em;
        margin-top: 12px;
    }

    .sidebar-toc-content .toc-h2 a {
        font-weight: 600;
    }

    .sidebar-toc-content .toc-h3 {
        font-size: 0.9em;
        padding-left: 20px;
    }

    .sidebar-toc-content .toc-h3 a {
        color: #4b5563;
        padding: 8px 12px;
    }

    /* æŠ˜ã‚ŠãŸãŸã¿ãƒœã‚¿ãƒ³ */
    .sidebar-toc-toggle {
        position: fixed;
        left: 340px;
        top: 20px;
        background: #3b82f6;
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 0 8px 8px 0;
        cursor: pointer;
        font-size: 1.2em;
        transition: all 0.3s ease;
        z-index: 1001;
        box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .sidebar-toc-toggle:hover {
        background: #2563eb;
        transform: scale(1.05);
    }

    body.sidebar-collapsed .sidebar-toc-toggle {
        left: 0;
    }

    /* ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
    html {
        scroll-behavior: smooth;
    }

    /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° */
    .sidebar-toc::-webkit-scrollbar {
        width: 8px;
    }

    .sidebar-toc::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 4px;
    }

    .sidebar-toc::-webkit-scrollbar-thumb {
        background: #3b82f6;
        border-radius: 4px;
    }

    .sidebar-toc::-webkit-scrollbar-thumb:hover {
        background: #2563eb;
    }

    /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
    @media (max-width: 768px) {
        body {
            padding-left: 0 !important;
        }

        .sidebar-toc {
            width: 280px;
            transform: translateX(-100%);
        }

        .sidebar-toc.open {
            transform: translateX(0);
        }

        .sidebar-toc-toggle {
            left: 0;
            border-radius: 0 8px 8px 0;
        }

        body.sidebar-collapsed .sidebar-toc-toggle {
            left: 0;
        }

        /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯åˆæœŸçŠ¶æ…‹ã§æŠ˜ã‚ŠãŸãŸã¿ */
        .sidebar-toc-header h2 {
            font-size: 1.2em;
        }

        .sidebar-toc-content a {
            padding: 8px 10px;
            font-size: 0.9em;
        }
    }

    /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œ */
    @media (min-width: 769px) and (max-width: 1024px) {
        body {
            padding-left: 310px;
        }

        .sidebar-toc {
            width: 290px;
        }

        .sidebar-toc-toggle {
            left: 290px;
        }

        body.sidebar-collapsed .sidebar-toc-toggle {
            left: 0;
        }
    }
</style>

<script>
    function toggleSidebarTOC() {
        const sidebar = document.getElementById('sidebar-toc');
        const body = document.body;
        const icon = document.getElementById('sidebar-toc-toggle-icon');

        // ãƒ¢ãƒã‚¤ãƒ«ã‹ã©ã†ã‹åˆ¤å®š
        const isMobile = window.innerWidth <= 768;

        if (isMobile) {
            // ãƒ¢ãƒã‚¤ãƒ«: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«openã‚¯ãƒ©ã‚¹ã‚’ãƒˆã‚°ãƒ«
            sidebar.classList.toggle('open');
            icon.textContent = sidebar.classList.contains('open') ? 'â—€' : 'â–¶';
        } else {
            // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: bodyã¨ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«collapsedã‚¯ãƒ©ã‚¹ã‚’ãƒˆã‚°ãƒ«
            body.classList.toggle('sidebar-collapsed');
            sidebar.classList.toggle('collapsed');
            icon.textContent = body.classList.contains('sidebar-collapsed') ? 'â–¶' : 'â—€';
        }

        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«çŠ¶æ…‹ã‚’ä¿å­˜
        const isCollapsed = body.classList.contains('sidebar-collapsed');
        localStorage.setItem('sidebarTOCCollapsed', isCollapsed);
    }

    // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®å‡¦ç†
    document.addEventListener('DOMContentLoaded', function() {
        const isMobile = window.innerWidth <= 768;
        const savedState = localStorage.getItem('sidebarTOCCollapsed');

        if (isMobile) {
            // ãƒ¢ãƒã‚¤ãƒ«: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æŠ˜ã‚ŠãŸãŸã¿
            const icon = document.getElementById('sidebar-toc-toggle-icon');
            icon.textContent = 'â–¶';
        } else {
            // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: ä¿å­˜ã•ã‚ŒãŸçŠ¶æ…‹ã‚’å¾©å…ƒï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯å±•é–‹ï¼‰
            if (savedState === 'true') {
                document.body.classList.add('sidebar-collapsed');
                document.getElementById('sidebar-toc').classList.add('collapsed');
                document.getElementById('sidebar-toc-toggle-icon').textContent = 'â–¶';
            }
        }

        // ãƒªã‚µã‚¤ã‚ºæ™‚ã®å‡¦ç†
        window.addEventListener('resize', function() {
            const isMobile = window.innerWidth <= 768;
            const sidebar = document.getElementById('sidebar-toc');
            const body = document.body;
            const icon = document.getElementById('sidebar-toc-toggle-icon');

            if (isMobile) {
                // ãƒ¢ãƒã‚¤ãƒ«ã«åˆ‡ã‚Šæ›¿ã‚ã£ãŸæ™‚
                sidebar.classList.remove('collapsed');
                body.classList.remove('sidebar-collapsed');
                if (!sidebar.classList.contains('open')) {
                    icon.textContent = 'â–¶';
                }
            } else {
                // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«åˆ‡ã‚Šæ›¿ã‚ã£ãŸæ™‚
                sidebar.classList.remove('open');
                const isCollapsed = localStorage.getItem('sidebarTOCCollapsed') === 'true';
                if (isCollapsed) {
                    body.classList.add('sidebar-collapsed');
                    sidebar.classList.add('collapsed');
                    icon.textContent = 'â–¶';
                } else {
                    icon.textContent = 'â—€';
                }
            }
        });
    });
</script>



    <div class="container">
        <div class="header">
            <h1>ğŸ“¬ AWS SQS DLQ & Redrive</h1>

            <p>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ ã§ç†è§£ã™ã‚‹ï¼å¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‡¦ç†å®Œå…¨ã‚¬ã‚¤ãƒ‰</p>
        </div>
        
        <div class="content">
            <!-- ã‚¤ãƒ³ãƒˆãƒ­ -->
            <div class="intro">
                <h2 id="ï¸-ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ ã§ä¾‹ãˆã‚‹ã¨è¶…ã‚ã‹ã‚Šã‚„ã™ã„!">ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ ã§ä¾‹ãˆã‚‹ã¨è¶…ã‚ã‹ã‚Šã‚„ã™ã„!</h2>
                <p class="intro-text">
                    <strong>SQSã¯ã€Œãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ä¼ç¥¨ã‚·ã‚¹ãƒ†ãƒ ã€ã®ã‚ˆã†ãªã‚‚ã®!</strong><br><br>
                    æ³¨æ–‡ãŒæ­£å¸¸ã«å‡¦ç†ã§ããªã„å ´åˆã€ã©ã†ã—ã¾ã™ã‹?<br>
                    <strong>Dead-letter Queue (DLQ)</strong> = å•é¡Œã®ã‚ã‚‹æ³¨æ–‡ã‚’åˆ¥ã®å ´æ‰€ã«ä¿ç®¡<br>
                    <strong>Redrive Policy</strong> = ä½•å›å¤±æ•—ã—ãŸã‚‰åˆ¥ã®å ´æ‰€ã«ç§»ã™ã‹ã®ãƒ«ãƒ¼ãƒ«<br><br>
                    ã“ã®ä»•çµ„ã¿ã‚’å®Œç’§ã«ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ã‚‡ã†âœ¨
                </p>
            </div>
            
            <!-- åŸºæœ¬æ¦‚å¿µã®æ¯”è¼ƒ -->
            <div class="concept-section">
                <h2 id="åŸºæœ¬æ¦‚å¿µ-ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³-vs-AWS" class="concept-title">ğŸ“š åŸºæœ¬æ¦‚å¿µï¼šãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ vs AWS</h2>
                
                <div class="analogy-box">
                    <div class="analogy-card restaurant">
                        <div class="analogy-icon">ğŸ½ï¸</div>
                        <div class="analogy-title">ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ </div>
                        <div class="analogy-content">
                            <p><strong>ğŸ“‹ æ³¨æ–‡ä¼ç¥¨ãƒˆãƒ¬ã‚¤</strong><br>
                            å¨æˆ¿ã«å±Šãæ³¨æ–‡ä¼ç¥¨ã‚’ç½®ãå ´æ‰€</p>
                            <br>
                            <p><strong>ğŸ‘¨â€ğŸ³ ã‚·ã‚§ãƒ•ï¼ˆå‡¦ç†æ‹…å½“ï¼‰</strong><br>
                            æ³¨æ–‡ã‚’è¦‹ã¦æ–™ç†ã‚’ä½œã‚‹äºº</p>
                            <br>
                            <p><strong>âŒ ä½œã‚Œãªã„æ³¨æ–‡</strong><br>
                            ææ–™ä¸è¶³ã€ãƒ¬ã‚·ãƒ”ä¸æ˜ãªã©</p>
                            <br>
                            <p><strong>ğŸ—‚ï¸ å•é¡Œæ³¨æ–‡ãƒœãƒƒã‚¯ã‚¹</strong><br>
                            å‡¦ç†ã§ããªã„æ³¨æ–‡ã‚’åˆ¥ç®¡ç†</p>
                            <br>
                            <p><strong>ğŸ“ å†è©¦è¡Œãƒ«ãƒ¼ãƒ«</strong><br>
                            ã€Œ3å›å¤±æ•—ã—ãŸã‚‰å•é¡Œãƒœãƒƒã‚¯ã‚¹ã¸ã€</p>
                        </div>
                    </div>
                    
                    <div class="analogy-card aws">
                        <div class="analogy-icon">â˜ï¸</div>
                        <div class="analogy-title">AWS SQSã®ä¸–ç•Œ</div>
                        <div class="analogy-content">
                            <p><strong>ğŸ“¬ Standard Queueï¼ˆé€šå¸¸ã‚­ãƒ¥ãƒ¼ï¼‰</strong><br>
                            ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿ç®¡ã™ã‚‹ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¥ãƒ¼</p>
                            <br>
                            <p><strong>âš™ï¸ Consumerï¼ˆã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ï¼‰</strong><br>
                            ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</p>
                            <br>
                            <p><strong>âŒ å‡¦ç†å¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</strong><br>
                            ã‚¨ãƒ©ãƒ¼ã‚„ä¾‹å¤–ã§å‡¦ç†ã§ããªã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</p>
                            <br>
                            <p><strong>ğŸ’€ Dead-letter Queue (DLQ)</strong><br>
                            å¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éš”é›¢ã™ã‚‹å°‚ç”¨ã‚­ãƒ¥ãƒ¼</p>
                            <br>
                            <p><strong>ğŸ”„ Redrive Policy</strong><br>
                            maxReceiveCount = ä½•å›ã§ç§»å‹•ã™ã‚‹ã‹</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å›³è§£ -->
            <div class="visual-diagram">
                <h2 id="å…¨ä½“ã®æµã‚Œ---ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å›³è§£" class="diagram-title">ğŸ¨ å…¨ä½“ã®æµã‚Œ - ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å›³è§£</h2>
                
                <div class="diagram-container">
                    <div class="diagram-row">
                        <div class="diagram-box source">
                            <div class="diagram-box-icon">ğŸ“¤</div>
                            <div class="diagram-box-title">Producer</div>
                            <div class="diagram-box-subtitle">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å…ƒ</div>
                        </div>
                        <div class="diagram-arrow">â†’</div>
                        <div class="diagram-box queue">
                            <div class="diagram-box-icon">ğŸ“¬</div>
                            <div class="diagram-box-title">Main Queue</div>
                            <div class="diagram-box-subtitle">ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¥ãƒ¼</div>
                        </div>
                        <div class="diagram-arrow">â†’</div>
                        <div class="diagram-box consumer">
                            <div class="diagram-box-icon">âš™ï¸</div>
                            <div class="diagram-box-title">Consumer</div>
                            <div class="diagram-box-subtitle">å‡¦ç†ã‚¢ãƒ—ãƒª</div>
                        </div>
                    </div>
                    
                    <div class="diagram-row" style="margin-top: 80px;">
                        <div class="diagram-box queue" style="opacity: 0.3;">
                            <div class="diagram-box-icon">ğŸ“¬</div>
                            <div class="diagram-box-title">Main Queue</div>
                            <div class="diagram-box-subtitle">3å›å¤±æ•—</div>
                        </div>
                        <div class="diagram-arrow" style="color: #ef4444;">â¬‡ï¸</div>
                        <div class="diagram-box dlq">
                            <div class="diagram-box-icon">ğŸ’€</div>
                            <div class="diagram-box-title">Dead-letter Queue</div>
                            <div class="diagram-box-subtitle">å¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿ç®¡</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 50px; padding: 30px; background: #fef3c7; border-radius: 12px; border: 3px solid #CA8A04;">
                        <div style="font-size: 1.5em; font-weight: bold; color: #92400e; margin-bottom: 15px;">
                            ğŸ”„ Redrive Policy ã®å½¹å‰²
                        </div>
                        <div style="font-size: 1.1em; color: #78350f; line-height: 1.8;">
                            <strong>maxReceiveCount = 3</strong> ã®å ´åˆ<br>
                            ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ3å›å‡¦ç†å¤±æ•—ã—ãŸã‚‰è‡ªå‹•çš„ã«DLQã¸ç§»å‹•
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å‡¦ç†ãƒ•ãƒ­ãƒ¼ -->
            <div class="flow-diagram">
                <h2 id="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ•ãƒ­ãƒ¼-5ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—" class="flow-title">ğŸ”„ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ•ãƒ­ãƒ¼ï¼š5ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—</h2>
                
                <div class="flow-steps">
                    <div class="flow-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">ğŸ“¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡</div>
                            <div class="step-description">
                                <strong>ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ï¼š</strong>æ–°ã—ã„æ³¨æ–‡ä¼ç¥¨ãŒå±Šã<br>
                                <strong>â˜ï¸ AWSï¼š</strong>ConsumerãŒãƒ¡ã‚¤ãƒ³ã‚­ãƒ¥ãƒ¼ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—<br>
                                <em style="color: #64748b;">â†’ ReceiveMessageãŒå®Ÿè¡Œã•ã‚Œã‚‹</em>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">âš™ï¸ å‡¦ç†è©¦è¡Œ</div>
                            <div class="step-description">
                                <strong>ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ï¼š</strong>ã‚·ã‚§ãƒ•ãŒæ³¨æ–‡ã‚’è¦‹ã¦æ–™ç†ã‚’ä½œã‚ã†ã¨ã™ã‚‹<br>
                                <strong>â˜ï¸ AWSï¼š</strong>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†<br>
                                <em style="color: #64748b;">â†’ ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè¡Œ</em>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-title">âŒ å‡¦ç†å¤±æ•—</div>
                            <div class="step-description">
                                <strong>ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ï¼š</strong>ææ–™ä¸è¶³ã§æ–™ç†ãŒä½œã‚Œãªã„ï¼<br>
                                <strong>â˜ï¸ AWSï¼š</strong>ä¾‹å¤–ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã€DeleteMessageãŒå‘¼ã°ã‚Œãªã„<br>
                                <em style="color: #64748b;">â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã‚­ãƒ¥ãƒ¼ã«æ®‹ã‚‹ï¼ˆReceiveCountãŒ+1ï¼‰</em>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <div class="step-title">ğŸ”„ ãƒªãƒˆãƒ©ã‚¤åˆ¤å®š</div>
                            <div class="step-description">
                                <strong>ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ï¼š</strong>ã€Œã¾ã 2å›ç›®ã ã‹ã‚‰ã‚‚ã†ä¸€åº¦ãƒˆãƒ©ã‚¤ã€<br>
                                <strong>â˜ï¸ AWSï¼š</strong>ReceiveCount < maxReceiveCount ãªã‚‰å†åº¦ã‚­ãƒ¥ãƒ¼ã«æˆ»ã‚‹<br>
                                <em style="color: #64748b;">â†’ Visibility Timeoutå¾Œã«å†åº¦å–å¾—å¯èƒ½</em>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <div class="step-title">ğŸ’€ DLQã¸ç§»å‹•</div>
                            <div class="step-description">
                                <strong>ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ï¼š</strong>ã€Œ3å›å¤±æ•—ï¼å•é¡Œæ³¨æ–‡ãƒœãƒƒã‚¯ã‚¹ã¸ã€<br>
                                <strong>â˜ï¸ AWSï¼š</strong>ReceiveCount â‰¥ maxReceiveCount ã§DLQã¸è‡ªå‹•ç§»å‹•<br>
                                <em style="color: #64748b;">â†’ å¾Œã§åŸå› èª¿æŸ»ã¨ä¿®æ­£ãŒå¯èƒ½</em>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ¯”è¼ƒï¼šæ­£å¸¸ vs å•é¡Œ -->
            <div class="concept-section">
                <h2 id="âš–ï¸-æ­£å¸¸å‡¦ç†-vs-å•é¡Œç™ºç”Ÿæ™‚ã®é•ã„" class="concept-title">âš–ï¸ æ­£å¸¸å‡¦ç† vs å•é¡Œç™ºç”Ÿæ™‚ã®é•ã„</h2>
                
                <div class="comparison-grid">
                    <div class="comparison-card normal">
                        <div class="comparison-icon">âœ…</div>
                        <div class="comparison-title">æ­£å¸¸å‡¦ç†ã®æµã‚Œ</div>
                        <ul class="comparison-items">
                            <li><strong>1ï¸âƒ£</strong> ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ (ReceiveMessage)</li>
                            <li><strong>2ï¸âƒ£</strong> å‡¦ç†æˆåŠŸ (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè¡Œ)</li>
                            <li><strong>3ï¸âƒ£</strong> ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‰Šé™¤ (DeleteMessage)</li>
                            <li><strong>ğŸ‰</strong> <span style="color: #047857; font-weight: bold;">å®Œäº†ï¼ã‚­ãƒ¥ãƒ¼ã‹ã‚‰æ¶ˆãˆã‚‹</span></li>
                        </ul>
                    </div>
                    
                    <div class="comparison-card problem">
                        <div class="comparison-icon">âŒ</div>
                        <div class="comparison-title">å¤±æ•—æ™‚ã®æµã‚Œ</div>
                        <ul class="comparison-items">
                            <li><strong>1ï¸âƒ£</strong> ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ (ReceiveMessage)</li>
                            <li><strong>2ï¸âƒ£</strong> å‡¦ç†å¤±æ•— (ä¾‹å¤–ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ)</li>
                            <li><strong>3ï¸âƒ£</strong> DeleteMessageå‘¼ã°ã‚Œãš</li>
                            <li><strong>4ï¸âƒ£</strong> ReceiveCount +1 (å—ä¿¡å›æ•°ã‚«ã‚¦ãƒ³ãƒˆ)</li>
                            <li><strong>5ï¸âƒ£</strong> Visibility Timeoutå¾Œã«å†åº¦å‡ºç¾</li>
                            <li><strong>6ï¸âƒ£</strong> maxReceiveCountåˆ°é”ã§DLQã¸</li>
                            <li><strong>ğŸ’€</strong> <span style="color: #ef4444; font-weight: bold;">DLQã§éš”é›¢ãƒ»åŸå› èª¿æŸ»</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- è¨­å®šæ–¹æ³• -->
            <div class="config-section">
                <h3 id="âš™ï¸-Redrive-Policy-è¨­å®šæ–¹æ³•" class="config-title">âš™ï¸ Redrive Policy è¨­å®šæ–¹æ³•</h3>
                
                <div class="config-cards">
                    <div class="config-card">
                        <div class="config-card-title">
                            <span>ğŸ“</span>
                            <span>å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</span>
                        </div>
                        
                        <div class="config-param">
                            <div class="param-name">maxReceiveCount</div>
                            <div class="param-desc">
                                <strong>æ„å‘³ï¼š</strong>ä½•å›å—ä¿¡å¤±æ•—ã—ãŸã‚‰DLQã¸ç§»å‹•ã™ã‚‹ã‹<br>
                                <strong>æ¨å¥¨å€¤ï¼š</strong>3ã€œ5å›<br>
                                <strong>ğŸ½ï¸ ä¾‹ï¼š</strong>ã€Œ3å›ä½œã‚Œãªã‹ã£ãŸã‚‰å•é¡Œãƒœãƒƒã‚¯ã‚¹ã¸ã€<br>
                                <strong>æ³¨æ„ï¼š</strong>1å›ã ã¨èª¤æ¤œçŸ¥ãŒå¤šãã€10å›ä»¥ä¸Šã ã¨é…ã™ãã‚‹
                            </div>
                        </div>
                        
                        <div class="config-param">
                            <div class="param-name">deadLetterTargetArn</div>
                            <div class="param-desc">
                                <strong>æ„å‘³ï¼š</strong>ã©ã®DLQã¸ç§»å‹•ã™ã‚‹ã‹ï¼ˆDLQã®ARNï¼‰<br>
                                <strong>å½¢å¼ï¼š</strong>arn:aws:sqs:region:account:queue-name<br>
                                <strong>ğŸ½ï¸ ä¾‹ï¼š</strong>ã€Œå•é¡Œæ³¨æ–‡ãƒœãƒƒã‚¯ã‚¹ã®å ´æ‰€ã€<br>
                                <strong>æ³¨æ„ï¼š</strong>äº‹å‰ã«DLQç”¨ã®ã‚­ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¦ãŠãå¿…è¦ã‚ã‚Š
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-card">
                        <div class="config-card-title">
                            <span>ğŸ”</span>
                            <span>é–¢é€£ã™ã‚‹é‡è¦è¨­å®š</span>
                        </div>
                        
                        <div class="config-param">
                            <div class="param-name">Visibility Timeout</div>
                            <div class="param-desc">
                                <strong>æ„å‘³ï¼š</strong>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒä»–ã®Consumerã«è¦‹ãˆãªããªã‚‹æ™‚é–“<br>
                                <strong>æ¨å¥¨å€¤ï¼š</strong>å‡¦ç†æ™‚é–“ã®6å€<br>
                                <strong>ğŸ½ï¸ ä¾‹ï¼š</strong>ã€Œã“ã®æ³¨æ–‡ã¯ä»Šèª¿ç†ä¸­ã€ã®æœ­ã‚’ä»˜ã‘ã‚‹æ™‚é–“<br>
                                <strong>æ³¨æ„ï¼š</strong>çŸ­ã™ãã‚‹ã¨é‡è¤‡å‡¦ç†ã€é•·ã™ãã‚‹ã¨ãƒªãƒˆãƒ©ã‚¤ãŒé…ã„
                            </div>
                        </div>
                        
                        <div class="config-param">
                            <div class="param-name">Message Retention Period</div>
                            <div class="param-desc">
                                <strong>æ„å‘³ï¼š</strong>DLQã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿æŒã™ã‚‹æœŸé–“<br>
                                <strong>æ¨å¥¨å€¤ï¼š</strong>14æ—¥é–“ï¼ˆæœ€å¤§ï¼‰<br>
                                <strong>ğŸ½ï¸ ä¾‹ï¼š</strong>ã€Œå•é¡Œæ³¨æ–‡ã‚’2é€±é–“ä¿ç®¡ã€<br>
                                <strong>æ³¨æ„ï¼š</strong>DLQã¯é•·ã‚ã«è¨­å®šã—ã¦åŸå› èª¿æŸ»ã®æ™‚é–“ã‚’ç¢ºä¿
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AWS CLIã‚³ãƒ¼ãƒ‰ä¾‹ -->
            <div class="code-example">
                <div class="code-title">ğŸ“Ÿ AWS CLI ã§ã®è¨­å®šä¾‹</div>
<pre><span class="code-comment"># 1. DLQç”¨ã®ã‚­ãƒ¥ãƒ¼ã‚’ä½œæˆ</span>
aws sqs create-queue \
  --queue-name <span class="code-string">my-app-dlq</span> \
  --attributes <span class="code-string">MessageRetentionPeriod=1209600</span>  <span class="code-comment"># 14æ—¥é–“</span>

<span class="code-comment"># 2. DLQã®ARNã‚’å–å¾—</span>
aws sqs get-queue-attributes \
  --queue-url <span class="code-string">https://sqs.ap-northeast-1.amazonaws.com/123456789012/my-app-dlq</span> \
  --attribute-names <span class="code-string">QueueArn</span>

<span class="code-comment"># 3. ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¥ãƒ¼ã«Redrive Policyã‚’è¨­å®š</span>
aws sqs set-queue-attributes \
  --queue-url <span class="code-string">https://sqs.ap-northeast-1.amazonaws.com/123456789012/my-main-queue</span> \
  --attributes <span class="code-string">'{
    "RedrivePolicy": "{
      \"deadLetterTargetArn\": \"arn:aws:sqs:ap-northeast-1:123456789012:my-app-dlq\",
      \"maxReceiveCount\": \"3\"
    }",
    "VisibilityTimeout": "300"
  }'</span></pre>
            </div>
            
            <!-- Terraformã‚³ãƒ¼ãƒ‰ä¾‹ -->
            <div class="code-example">
                <div class="code-title">ğŸ—ï¸ Terraform ã§ã®è¨­å®šä¾‹</div>
<pre><span class="code-comment"># DLQç”¨ã®ã‚­ãƒ¥ãƒ¼</span>
<span class="code-keyword">resource</span> <span class="code-string">"aws_sqs_queue"</span> <span class="code-string">"dlq"</span> {
  <span class="code-property">name</span>                      = <span class="code-string">"my-app-dlq"</span>
  <span class="code-property">message_retention_seconds</span> = <span class="code-number">1209600</span>  <span class="code-comment"># 14æ—¥</span>
  
  <span class="code-property">tags</span> = {
    <span class="code-property">Name</span>        = <span class="code-string">"My App DLQ"</span>
    <span class="code-property">Environment</span> = <span class="code-string">"production"</span>
  }
}

<span class="code-comment"># ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¥ãƒ¼ï¼ˆRedrive Policyè¨­å®šæ¸ˆã¿ï¼‰</span>
<span class="code-keyword">resource</span> <span class="code-string">"aws_sqs_queue"</span> <span class="code-string">"main"</span> {
  <span class="code-property">name</span>                      = <span class="code-string">"my-main-queue"</span>
  <span class="code-property">visibility_timeout_seconds</span> = <span class="code-number">300</span>      <span class="code-comment"># 5åˆ†</span>
  <span class="code-property">message_retention_seconds</span> = <span class="code-number">345600</span>   <span class="code-comment"># 4æ—¥</span>
  
  <span class="code-comment"># ğŸ”„ Redrive Policyè¨­å®š</span>
  <span class="code-property">redrive_policy</span> = <span class="code-keyword">jsonencode</span>({
    <span class="code-property">deadLetterTargetArn</span> = <span class="code-property">aws_sqs_queue.dlq.arn</span>
    <span class="code-property">maxReceiveCount</span>     = <span class="code-number">3</span>
  })
  
  <span class="code-property">tags</span> = {
    <span class="code-property">Name</span>        = <span class="code-string">"My Main Queue"</span>
    <span class="code-property">Environment</span> = <span class="code-string">"production"</span>
  }
}

<span class="code-comment"># ğŸ’€ DLQã‹ã‚‰ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¥ãƒ¼ã¸ã®Redriveè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰</span>
<span class="code-keyword">resource</span> <span class="code-string">"aws_sqs_queue_redrive_allow_policy"</span> <span class="code-string">"dlq_redrive"</span> {
  <span class="code-property">queue_url</span> = <span class="code-property">aws_sqs_queue.dlq.id</span>
  
  <span class="code-property">redrive_allow_policy</span> = <span class="code-keyword">jsonencode</span>({
    <span class="code-property">redrivePermission</span> = <span class="code-string">"byQueue"</span>
    <span class="code-property">sourceQueueArns</span>   = [<span class="code-property">aws_sqs_queue.main.arn</span>]
  })
}</pre>
            </div>
            
            <!-- ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ -->
            <div class="use-case-section">
                <h3 id="å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹" class="use-case-title">ğŸ’¼ å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹</h3>
                
                <div class="use-case-grid">
                    <div class="use-case-card">
                        <div class="use-case-icon">ğŸ“§</div>
                        <h4>ãƒ¡ãƒ¼ãƒ«é…ä¿¡ã‚·ã‚¹ãƒ†ãƒ </h4>
                        <div class="use-case-content">
                            <strong>ã‚·ãƒŠãƒªã‚ªï¼š</strong><br>
                            ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç„¡åŠ¹ã€SMTPã‚µãƒ¼ãƒãƒ¼ãƒ€ã‚¦ãƒ³<br><br>
                            <strong>è¨­å®šï¼š</strong><br>
                            maxReceiveCount = 5<br>
                            â†’ 5å›å¤±æ•—ã—ãŸã‚‰DLQã¸<br><br>
                            <strong>å¯¾å¿œï¼š</strong><br>
                            DLQã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¦‹ã¦ç„¡åŠ¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’DBã‹ã‚‰å‰Šé™¤
                        </div>
                    </div>
                    
                    <div class="use-case-card">
                        <div class="use-case-icon">ğŸ’³</div>
                        <h4>æ±ºæ¸ˆå‡¦ç†ã‚·ã‚¹ãƒ†ãƒ </h4>
                        <div class="use-case-content">
                            <strong>ã‚·ãƒŠãƒªã‚ªï¼š</strong><br>
                            å¤–éƒ¨APIéšœå®³ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆ<br><br>
                            <strong>è¨­å®šï¼š</strong><br>
                            maxReceiveCount = 3<br>
                            â†’ ã™ãã«éš”é›¢ã—ã¦æ‰‹å‹•ç¢ºèª<br><br>
                            <strong>å¯¾å¿œï¼š</strong><br>
                            é‡è¦åº¦ãŒé«˜ã„ã®ã§å³åº§ã«ã‚¢ãƒ©ãƒ¼ãƒˆç™ºè¡Œã€æ‰‹å‹•å†å‡¦ç†
                        </div>
                    </div>
                    
                    <div class="use-case-card">
                        <div class="use-case-icon">ğŸ“Š</div>
                        <h4>ãƒ‡ãƒ¼ã‚¿åˆ†æãƒãƒƒãƒ</h4>
                        <div class="use-case-content">
                            <strong>ã‚·ãƒŠãƒªã‚ªï¼š</strong><br>
                            ä¸æ­£ãªãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€è¨ˆç®—ã‚¨ãƒ©ãƒ¼<br><br>
                            <strong>è¨­å®šï¼š</strong><br>
                            maxReceiveCount = 2<br>
                            â†’ å°‘ãªã„å›æ•°ã§æ—©ã‚ã«åˆ†é›¢<br><br>
                            <strong>å¯¾å¿œï¼š</strong><br>
                            DLQãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åˆ†æã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ”¹å–„
                        </div>
                    </div>
                    
                    <div class="use-case-card">
                        <div class="use-case-icon">ğŸ–¼ï¸</div>
                        <h4>ç”»åƒå¤‰æ›ã‚µãƒ¼ãƒ“ã‚¹</h4>
                        <div class="use-case-content">
                            <strong>ã‚·ãƒŠãƒªã‚ªï¼š</strong><br>
                            ç ´æç”»åƒã€æœªå¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€ãƒ¡ãƒ¢ãƒªä¸è¶³<br><br>
                            <strong>è¨­å®šï¼š</strong><br>
                            maxReceiveCount = 4<br>
                            â†’ ä¸€æ™‚çš„ã‚¨ãƒ©ãƒ¼ã‚’è€ƒæ…®ã—ã¦å°‘ã—å¤šã‚<br><br>
                            <strong>å¯¾å¿œï¼š</strong><br>
                            å•é¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã¦ã‚¨ãƒ©ãƒ¼å‡¦ç†å¼·åŒ–
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ -->
            <div class="best-practices">
                <h3 id="âœ…-ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹" class="best-practices-title">âœ… ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h3>
                
                <div class="practice-items">
                    <div class="practice-item">
                        <div class="practice-icon">ğŸ¯</div>
                        <div class="practice-title">1. maxReceiveCountã¯æ…é‡ã«è¨­å®š</div>
                        <div class="practice-desc">
                            <strong>æ¨å¥¨ï¼š</strong>3ã€œ5å›<br>
                            â€¢ 1å›ï¼šèª¤æ¤œçŸ¥ãŒå¤šã™ãã‚‹<br>
                            â€¢ 10å›ä»¥ä¸Šï¼šå•é¡Œç™ºè¦‹ãŒé…ã‚Œã‚‹<br>
                            â€¢ å‡¦ç†ã®é‡è¦åº¦ã¨ã‚³ã‚¹ãƒˆã‚’è€ƒæ…®ã—ã¦æ±ºå®š
                        </div>
                    </div>
                    
                    <div class="practice-item">
                        <div class="practice-icon">ğŸ””</div>
                        <div class="practice-title">2. DLQã®ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š</div>
                        <div class="practice-desc">
                            <strong>å¿…é ˆï¼š</strong>CloudWatch Alarmã‚’è¨­å®š<br>
                            â€¢ ApproximateNumberOfMessagesVisible > 0<br>
                            â€¢ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒDLQã«å…¥ã£ãŸã‚‰å³åº§ã«é€šçŸ¥<br>
                            â€¢ Slackã‚„ãƒ¡ãƒ¼ãƒ«ã§é–‹ç™ºãƒãƒ¼ãƒ ã¸ã‚¢ãƒ©ãƒ¼ãƒˆ
                        </div>
                    </div>
                    
                    <div class="practice-item">
                        <div class="practice-icon">ğŸ“</div>
                        <div class="practice-title">3. DLQã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«è©³ç´°æƒ…å ±ã‚’è¿½åŠ </div>
                        <div class="practice-desc">
                            <strong>æ¨å¥¨ï¼š</strong>MessageAttributesã‚’æ´»ç”¨<br>
                            â€¢ ã‚¨ãƒ©ãƒ¼ç†ç”±ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—<br>
                            â€¢ å…ƒã®ReceiveCount<br>
                            â€¢ å‡¦ç†è©¦è¡Œæ™‚ã®ãƒ­ã‚°ID<br>
                            â†’ åŸå› èª¿æŸ»ãŒåŠ‡çš„ã«æ¥½ã«ãªã‚‹
                        </div>
                    </div>
                    
                    <div class="practice-item">
                        <div class="practice-icon">ğŸ”„</div>
                        <div class="practice-title">4. Redriveæ©Ÿèƒ½ã§å†å‡¦ç†</div>
                        <div class="practice-desc">
                            <strong>æ´»ç”¨ï¼š</strong>å•é¡Œä¿®æ­£å¾Œã«DLQã‹ã‚‰æˆ»ã™<br>
                            â€¢ AWSã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã€ŒStart DLQ redriveã€<br>
                            â€¢ ä¿®æ­£æ¸ˆã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…ƒã®ã‚­ãƒ¥ãƒ¼ã¸<br>
                            â€¢ ä¸€æ‹¬å‡¦ç†ãŒå¯èƒ½ã§åŠ¹ç‡çš„
                        </div>
                    </div>
                    
                    <div class="practice-item">
                        <div class="practice-icon">â±ï¸</div>
                        <div class="practice-title">5. RetentionæœŸé–“ã‚’é•·ã‚ã«è¨­å®š</div>
                        <div class="practice-desc">
                            <strong>DLQæ¨å¥¨ï¼š</strong>14æ—¥é–“ï¼ˆæœ€å¤§å€¤ï¼‰<br>
                            â€¢ ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¥ãƒ¼ï¼š4æ—¥é–“<br>
                            â€¢ DLQï¼š14æ—¥é–“<br>
                            â†’ å•é¡Œèª¿æŸ»ã¨ä¿®æ­£ã®æ™‚é–“ã‚’ååˆ†ç¢ºä¿
                        </div>
                    </div>
                    
                    <div class="practice-item">
                        <div class="practice-icon">ğŸ—ï¸</div>
                        <div class="practice-title">6. ç’°å¢ƒã”ã¨ã«DLQã‚’åˆ†é›¢</div>
                        <div class="practice-desc">
                            <strong>æ§‹æˆï¼š</strong>dev/staging/prodåˆ¥ã€…ã«<br>
                            â€¢ my-app-dev-dlq<br>
                            â€¢ my-app-staging-dlq<br>
                            â€¢ my-app-prod-dlq<br>
                            â†’ ç’°å¢ƒé–“ã®æ··ä¹±ã‚’é˜²æ­¢
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- è­¦å‘Šãƒœãƒƒã‚¯ã‚¹ -->
            <div class="warning-box">
                <div class="warning-title">
                    <span>âš ï¸</span>
                    <span>ã‚ˆãã‚ã‚‹é–“é•ã„ã¨æ³¨æ„ç‚¹</span>
                </div>
                <div class="warning-content">
                    <strong>âŒ é–“é•ã„1: DLQã‚’è¨­å®šã›ãšã«é‹ç”¨</strong><br>
                    â†’ å¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ°¸é ã«ãƒªãƒˆãƒ©ã‚¤ã•ã‚Œç¶šã‘ã‚‹ã€‚Visibility Timeoutå¾Œã«ä½•åº¦ã‚‚å‡¦ç†ã•ã‚Œã¦ã‚³ã‚¹ãƒˆãŒå¢—å¤§ã€‚<br><br>
                    
                    <strong>âŒ é–“é•ã„2: maxReceiveCountã‚’1ã«è¨­å®š</strong><br>
                    â†’ ä¸€æ™‚çš„ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãªã©ã§ã‚‚å³DLQè¡Œãã«ãªã‚Šã€èª¤æ¤œçŸ¥ãŒå¤šã™ãã‚‹ã€‚<br><br>
                    
                    <strong>âŒ é–“é•ã„3: DLQã®ç›£è¦–ã‚’ã—ãªã„</strong><br>
                    â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒDLQã«æºœã¾ã£ã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ã‹ãšã€é‡è¦ãªå‡¦ç†ãŒæ­¢ã¾ã£ãŸã¾ã¾ã€‚<br><br>
                    
                    <strong>âŒ é–“é•ã„4: å‡¦ç†å¤±æ•—æ™‚ã«DeleteMessageã‚’å‘¼ã¶</strong><br>
                    â†’ ãƒªãƒˆãƒ©ã‚¤ã®æ©Ÿä¼šã‚’å¤±ã„ã€ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚¹ã®åŸå› ã«ã€‚ã‚¨ãƒ©ãƒ¼æ™‚ã¯Deleteã—ã¦ã¯ã„ã‘ãªã„ã€‚<br><br>
                    
                    <strong>âŒ é–“é•ã„5: DLQã®RetentionæœŸé–“ãŒçŸ­ã„</strong><br>
                    â†’ åŸå› èª¿æŸ»ä¸­ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ¶ˆãˆã¦ã—ã¾ã„ã€å•é¡Œã®å†ç¾ãŒã§ããªããªã‚‹ã€‚
                </div>
            </div>
            
            <!-- Tipãƒœãƒƒã‚¯ã‚¹ -->
            <div class="tip-box">
                <div class="tip-title">
                    <span>ğŸ’¡</span>
                    <span>ãƒ—ãƒ­ã®Tipsï¼šDLQé‹ç”¨ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯</span>
                </div>
                <div class="tip-content">
                    <strong>ğŸ“Š Tip 1: DLQãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä½œæˆ</strong><br>
                    CloudWatch Logsã«ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é›†ç´„ã—ã€ã©ã®ç¨®é¡ã®ã‚¨ãƒ©ãƒ¼ãŒå¤šã„ã‹å¯è¦–åŒ–ã€‚å„ªå…ˆåº¦ã‚’ã¤ã‘ã¦å¯¾å¿œã€‚<br><br>
                    
                    <strong>ğŸ” Tip 2: Lambda DLQãƒˆãƒªã‚¬ãƒ¼ã§è‡ªå‹•åˆ†æ</strong><br>
                    DLQã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå…¥ã£ãŸã‚‰Lambdaã‚’èµ·å‹•ã—ã€ã‚¨ãƒ©ãƒ¼åˆ†é¡ã‚’è‡ªå‹•å®Ÿè¡Œã€‚Slackã«è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡ã€‚<br><br>
                    
                    <strong>âš™ï¸ Tip 3: æ®µéšçš„ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥</strong><br>
                    maxReceiveCount=3ã§DLQè¡Œã â†’ Lambdaå‡¦ç† â†’ ä¿®æ­£å¯èƒ½ãªã‚‰å…ƒã®ã‚­ãƒ¥ãƒ¼ã¸Redrive â†’ ä¸å¯èƒ½ãªã‚‰S3ã¸ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€‚<br><br>
                    
                    <strong>ğŸ§ª Tip 4: DLQã§ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚’ä½œã‚‹</strong><br>
                    æœ¬ç•ªã®DLQãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦é–‹ç™ºç’°å¢ƒã§å†ç¾ãƒ†ã‚¹ãƒˆã€‚å®Ÿéš›ã®å•é¡Œãƒ‡ãƒ¼ã‚¿ã§æ¤œè¨¼ã§ãã¦ç¢ºå®Ÿã€‚<br><br>
                    
                    <strong>ğŸ“ˆ Tip 5: ã‚¨ãƒ©ãƒ¼ç‡ã‚’KPIã¨ã—ã¦è¿½è·¡</strong><br>
                    (DLQãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•° / ç·ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°) Ã— 100 = ã‚¨ãƒ©ãƒ¼ç‡ã€‚é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆã§æ”¹å–„ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’å¯è¦–åŒ–ã€‚
                </div>
            </div>
            
            <!-- Pythonå®Ÿè£…ä¾‹ -->
            <div class="code-example">
                <div class="code-title">ğŸ Pythonå®Ÿè£…ä¾‹ï¼šã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä»˜ãConsumer</div>
<pre><span class="code-keyword">import</span> boto3
<span class="code-keyword">import</span> json
<span class="code-keyword">import</span> logging
<span class="code-keyword">from</span> time <span class="code-keyword">import</span> sleep

logger = logging.getLogger()
logger.setLevel(logging.INFO)

sqs = boto3.client(<span class="code-string">'sqs'</span>, region_name=<span class="code-string">'ap-northeast-1'</span>)
QUEUE_URL = <span class="code-string">'https://sqs.ap-northeast-1.amazonaws.com/123456789012/my-main-queue'</span>

<span class="code-keyword">def</span> <span class="code-keyword">process_message</span>(message_body):
    <span class="code-string">"""ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼šã“ã“ã§å®Ÿéš›ã®å‡¦ç†ã‚’å®Ÿè¡Œ"""</span>
    <span class="code-comment"># ä¾‹ï¼šå¤–éƒ¨APIã‚’å‘¼ã³å‡ºã™ã€DBã«æ›¸ãè¾¼ã‚€ãªã©</span>
    data = json.loads(message_body)
    
    <span class="code-comment"># ä½•ã‚‰ã‹ã®å‡¦ç†...</span>
    <span class="code-keyword">if</span> data.get(<span class="code-string">'invalid'</span>):
        <span class="code-keyword">raise</span> ValueError(<span class="code-string">"Invalid data format"</span>)
    
    <span class="code-keyword">return</span> <span class="code-string">True</span>

<span class="code-keyword">def</span> <span class="code-keyword">consume_messages</span>():
    <span class="code-string">"""ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ã¦å‡¦ç†ã™ã‚‹"""</span>
    <span class="code-keyword">while</span> <span class="code-string">True</span>:
        <span class="code-comment"># ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ï¼ˆLong Polling: 20ç§’ï¼‰</span>
        response = sqs.receive_message(
            QueueUrl=QUEUE_URL,
            MaxNumberOfMessages=<span class="code-number">10</span>,  <span class="code-comment"># ä¸€åº¦ã«10ä»¶ã¾ã§</span>
            WaitTimeSeconds=<span class="code-number">20</span>,       <span class="code-comment"># Long Polling</span>
            AttributeNames=[<span class="code-string">'ApproximateReceiveCount'</span>]
        )
        
        messages = response.get(<span class="code-string">'Messages'</span>, [])
        
        <span class="code-keyword">if</span> <span class="code-keyword">not</span> messages:
            logger.info(<span class="code-string">"No messages, waiting..."</span>)
            <span class="code-keyword">continue</span>
        
        <span class="code-keyword">for</span> message <span class="code-keyword">in</span> messages:
            receipt_handle = message[<span class="code-string">'ReceiptHandle'</span>]
            message_id = message[<span class="code-string">'MessageId'</span>]
            body = message[<span class="code-string">'Body'</span>]
            receive_count = <span class="code-keyword">int</span>(message[<span class="code-string">'Attributes'</span>].get(<span class="code-string">'ApproximateReceiveCount'</span>, <span class="code-number">0</span>))
            
            logger.info(<span class="code-string">f"Processing message {message_id} (ReceiveCount: {receive_count})"</span>)
            
            <span class="code-keyword">try</span>:
                <span class="code-comment"># âœ… ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè¡Œ</span>
                process_message(body)
                
                <span class="code-comment"># âœ… æˆåŠŸã—ãŸã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤</span>
                sqs.delete_message(
                    QueueUrl=QUEUE_URL,
                    ReceiptHandle=receipt_handle
                )
                logger.info(<span class="code-string">f"Successfully processed message {message_id}"</span>)
                
            <span class="code-keyword">except</span> Exception <span class="code-keyword">as</span> e:
                <span class="code-comment"># âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã¯Deleteã—ãªã„ â†’ è‡ªå‹•çš„ã«ã‚­ãƒ¥ãƒ¼ã«æˆ»ã‚‹</span>
                logger.error(<span class="code-string">f"Failed to process message {message_id}: {str(e)}"</span>)
                logger.error(<span class="code-string">f"Receive count: {receive_count}. Will retry or move to DLQ."</span>)
                
                <span class="code-comment"># âš ï¸ DeleteMessageã‚’å‘¼ã°ãªã„ã“ã¨ã§ï¼š</span>
                <span class="code-comment"># 1. Visibility Timeoutå¾Œã«å†åº¦å‡¦ç†å¯èƒ½ã«ãªã‚‹</span>
                <span class="code-comment"># 2. ReceiveCountãŒ+1ã•ã‚Œã‚‹</span>
                <span class="code-comment"># 3. maxReceiveCountã«é”ã—ãŸã‚‰è‡ªå‹•çš„ã«DLQã¸</span>
                <span class="code-keyword">continue</span>

<span class="code-keyword">if</span> __name__ == <span class="code-string">"__main__"</span>:
    logger.info(<span class="code-string">"Starting SQS Consumer..."</span>)
    consume_messages()</pre>
            </div>
            
            <!-- ã¾ã¨ã‚ -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #9333EA 100%); color: white; padding: 50px; border-radius: 20px; text-align: center; margin-top: 50px;">
                <h2 id="ã¾ã¨ã‚" style="font-size: 2.5em; margin-bottom: 30px;">ğŸ“ ã¾ã¨ã‚</h2>
                
                <div style="max-width: 1100px; margin: 0 auto;">
                    <div style="background: rgba(255,255,255,0.15); padding: 35px; border-radius: 15px; backdrop-filter: blur(10px); margin-bottom: 30px;">
                        <h3 id="ï¸-ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®å•é¡Œæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ -=-SQS-DLQ" style="font-size: 1.8em; margin-bottom: 15px;">ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®å•é¡Œæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ  = SQS DLQ</h3>
                        <p style="font-size: 1.15em; line-height: 2;">
                            Dead-letter Queue ã¨ Redrive Policy ã§<br>
                            <strong>å¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é©åˆ‡ã«ç®¡ç†</strong>ã§ãã‚‹âœ¨
                        </p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0;">
                        <div style="background: rgba(255,255,255,0.15); padding: 25px; border-radius: 12px; backdrop-filter: blur(10px);">
                            <div style="font-size: 2.5em; margin-bottom: 15px;">ğŸ’€</div>
                            <strong style="font-size: 1.3em;">DLQ</strong><br><br>
                            å¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’<br>å®‰å…¨ã«éš”é›¢ã—ã¦<br>å¾Œã§èª¿æŸ»
                        </div>
                        <div style="background: rgba(255,255,255,0.15); padding: 25px; border-radius: 12px; backdrop-filter: blur(10px);">
                            <div style="font-size: 2.5em; margin-bottom: 15px;">ğŸ”„</div>
                            <strong style="font-size: 1.3em;">Redrive Policy</strong><br><br>
                            ä½•å›å¤±æ•—ã—ãŸã‚‰<br>DLQã¸ç§»å‹•ã™ã‚‹ã‹ã®<br>ãƒ«ãƒ¼ãƒ«è¨­å®š
                        </div>
                        <div style="background: rgba(255,255,255,0.15); padding: 25px; border-radius: 12px; backdrop-filter: blur(10px);">
                            <div style="font-size: 2.5em; margin-bottom: 15px;">ğŸ“Š</div>
                            <strong style="font-size: 1.3em;">ç›£è¦–</strong><br><br>
                            DLQã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ<br>å…¥ã£ãŸã‚‰å³åº§ã«<br>ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 30px; border-radius: 15px; backdrop-filter: blur(10px); margin-top: 30px;">
                        <p style="font-size: 1.4em; line-height: 1.8; margin-bottom: 20px;">
                            <strong>ğŸ¯ é‡è¦ãƒã‚¤ãƒ³ãƒˆï¼š</strong>
                        </p>
                        <p style="font-size: 1.2em; line-height: 2;">
                            1ï¸âƒ£ <strong>maxReceiveCount = 3ã€œ5</strong> ãŒæ¨å¥¨<br>
                            2ï¸âƒ£ ã‚¨ãƒ©ãƒ¼æ™‚ã¯ <strong>DeleteMessage ã‚’å‘¼ã°ãªã„</strong><br>
                            3ï¸âƒ£ <strong>CloudWatch Alarm</strong> ã§DLQç›£è¦–<br>
                            4ï¸âƒ£ å•é¡Œä¿®æ­£å¾Œã¯ <strong>Redriveæ©Ÿèƒ½</strong> ã§å†å‡¦ç†<br>
                            5ï¸âƒ£ DLQã®RetentionæœŸé–“ã¯ <strong>14æ—¥é–“</strong>ï¼ˆæœ€å¤§ï¼‰
                        </p>
                    </div>
                    
                    <p style="font-size: 1.3em; margin-top: 30px; padding: 25px; background: rgba(255,255,255,0.15); border-radius: 12px; backdrop-filter: blur(10px);">
                        ğŸ‰ <strong>ã“ã‚Œã§SQSã®å¤±æ•—å‡¦ç†ã¯ãƒãƒƒãƒãƒªï¼</strong><br>
                        å®‰å¿ƒã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼ã‚’é‹ç”¨ã§ãã¾ã™ï¼
                    </p>
                </div>
            </div>
        </div>
    </div>
<button style="position: fixed; bottom: 30px; right: 30px; background-color: #dc7600; color: white; border: none; padding: 15px 30px; border-radius: 50px; font-size: 1.1em; font-weight: bold; cursor: pointer; box-shadow: 0 4px 12px rgba(255, 153, 0, 0.3); transition: all 0.3s ease; z-index: 1000;" onclick="window.location.href='../index.html'" onmouseover="this.style.backgroundColor='#E68900'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 6px 16px rgba(255, 153, 0, 0.4)';" onmouseout="this.style.backgroundColor='#dc7600'; this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(255, 153, 0, 0.3)';">ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>

</body>
</html>