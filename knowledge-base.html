<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS SAP „Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ‰∏ÄË¶ß</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #232F3E 0%, #374151 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #dc7600;
        }

        .header p {
            font-size: 1.1em;
            color: #909296;
            margin-bottom: 20px;
        }

        .header-nav {
            margin-top: 20px;
        }

        .header-nav a {
            display: inline-block;
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 0 5px;
            transition: background-color 0.3s;
        }

        .header-nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .content {
            padding: 40px;
        }

        /* Áµ±Ë®à„Çª„ÇØ„Ç∑„Éß„É≥ */
        .stats-section {
            background: linear-gradient(135deg, #FFF5E6 0%, #FFE8CC 100%);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #dc7600;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #6B7280;
            font-size: 0.9em;
        }

        /* „Ç≥„É≥„Éà„É≠„Éº„É´„Éë„Éç„É´ */
        .control-panel {
            background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 100%);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .control-section {
            margin-bottom: 20px;
        }

        .control-section:last-child {
            margin-bottom: 0;
        }

        .control-label {
            font-weight: bold;
            color: #232F3E;
            margin-bottom: 10px;
            display: block;
            font-size: 1.1em;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #CBD5E1;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .search-box:focus {
            outline: none;
            border-color: #dc7600;
        }

        .filter-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .filter-chip {
            display: inline-flex;
            align-items: center;
            padding: 8px 15px;
            background-color: white;
            border: 2px solid #CBD5E1;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }

        .filter-chip input[type="checkbox"] {
            margin-right: 8px;
            cursor: pointer;
        }

        .filter-chip:hover {
            border-color: #dc7600;
            background-color: #FFF5E6;
        }

        .filter-chip.active {
            background-color: #dc7600;
            color: white;
            border-color: #dc7600;
        }

        .sort-view-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .sort-controls, .view-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        select {
            padding: 10px 15px;
            border: 2px solid #CBD5E1;
            border-radius: 8px;
            background-color: white;
            cursor: pointer;
            font-size: 1em;
        }

        .view-btn {
            padding: 10px 20px;
            background-color: white;
            border: 2px solid #CBD5E1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .view-btn:hover, .view-btn.active {
            background-color: #232F3E;
            color: white;
            border-color: #232F3E;
        }

        /* „É™„ÇΩ„Éº„ÇπË°®Á§∫ */
        .resources-container {
            min-height: 400px;
        }

        /* „Ç´„Éº„ÉâË°®Á§∫ */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .resource-card {
            background: white;
            border: 2px solid #909296;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            border-color: #dc7600;
        }

        .resource-category {
            display: inline-block;
            padding: 5px 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            font-size: 0.75em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .resource-title {
            font-size: 1.1em;
            color: #232F3E;
            margin-bottom: 10px;
            font-weight: bold;
            line-height: 1.4;
        }

        .resource-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }

        .resource-tag {
            padding: 3px 8px;
            background-color: #F3F4F6;
            color: #6B7280;
            border-radius: 10px;
            font-size: 0.75em;
        }

        /* „ÉÜ„Éº„Éñ„É´Ë°®Á§∫ */
        .resources-table {
            display: none;
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }

        .resources-table.active {
            display: table;
        }

        .resources-table th {
            background: linear-gradient(135deg, #232F3E 0%, #374151 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .resources-table td {
            padding: 15px;
            border-bottom: 1px solid #909296;
        }

        .resources-table tr:hover {
            background-color: #F9FAFB;
            cursor: pointer;
        }

        .table-category {
            display: inline-block;
            padding: 5px 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            font-size: 0.85em;
        }

        .table-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .table-tag {
            padding: 2px 8px;
            background-color: #F3F4F6;
            color: #6B7280;
            border-radius: 8px;
            font-size: 0.8em;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #6B7280;
        }

        .no-results h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: #232F3E;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .resources-grid {
                grid-template-columns: 1fr;
            }

            .sort-view-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .resources-table {
                font-size: 0.9em;
            }

            .resources-table th,
            .resources-table td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AWS SAP „Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ</h1>
            <p>„Åô„Åπ„Å¶„ÅÆÂ≠¶Áøí„É™„ÇΩ„Éº„Çπ„Çí‰∏ÄË¶ß„ÉªÊ§úÁ¥¢„Éª„Éï„Ç£„É´„Çø„É™„É≥„Ç∞</p>
            <div class="header-nav">
                <a href="index.html">üè† „Éõ„Éº„É†„Å´Êàª„Çã</a>
                <a href="quiz.html" target="_blank">üìù „ÇØ„Ç§„Ç∫</a>
                <a href="table-of-contents.html">üìö ÁõÆÊ¨°</a>
            </div>
        </div>

        <div class="content">
            <!-- Áµ±Ë®à„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div class="stats-section">
                <h3>üìä „É™„ÇΩ„Éº„ÇπÁµ±Ë®à</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="totalResources">0</div>
                        <div class="stat-label">Á∑è„É™„ÇΩ„Éº„ÇπÊï∞</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="displayedResources">0</div>
                        <div class="stat-label">Ë°®Á§∫‰∏≠</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="categoryCount">0</div>
                        <div class="stat-label">„Ç´„ÉÜ„Ç¥„É™Êï∞</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="serviceCount">0</div>
                        <div class="stat-label">„Çµ„Éº„Éì„ÇπÊï∞</div>
                    </div>
                </div>
            </div>

            <!-- „Ç≥„É≥„Éà„É≠„Éº„É´„Éë„Éç„É´ -->
            <div class="control-panel">
                <!-- Ê§úÁ¥¢ -->
                <div class="control-section">
                    <label class="control-label">üîç Ê§úÁ¥¢</label>
                    <input type="text" class="search-box" id="searchInput" placeholder="„É™„ÇΩ„Éº„Çπ„ÅÆ„Çø„Ç§„Éà„É´„ÅßÊ§úÁ¥¢...">
                </div>

                <!-- „Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„Çø -->
                <div class="control-section">
                    <label class="control-label">üìÇ „Ç´„ÉÜ„Ç¥„É™„ÅßÁµû„ÇäËæº„Åø</label>
                    <div class="filter-group" id="categoryFilters"></div>
                </div>

                <!-- „Çµ„Éº„Éì„Çπ„Éï„Ç£„É´„Çø -->
                <div class="control-section">
                    <label class="control-label">üîß AWS„Çµ„Éº„Éì„Çπ„ÅßÁµû„ÇäËæº„Åø</label>
                    <div class="filter-group" id="serviceFilters"></div>
                </div>

                <!-- „Çø„Ç§„Éó„Éï„Ç£„É´„Çø -->
                <div class="control-section">
                    <label class="control-label">üìã „É™„ÇΩ„Éº„Çπ„Çø„Ç§„Éó„ÅßÁµû„ÇäËæº„Åø</label>
                    <div class="filter-group" id="typeFilters"></div>
                </div>

                <!-- „ÇΩ„Éº„Éà„ÉªË°®Á§∫ÂàáÊõø -->
                <div class="control-section">
                    <div class="sort-view-controls">
                        <div class="sort-controls">
                            <label class="control-label" style="margin: 0 10px 0 0;">‰∏¶„Å≥Êõø„Åà:</label>
                            <select id="sortSelect">
                                <option value="title">„Çø„Ç§„Éà„É´È†Ü</option>
                                <option value="category">„Ç´„ÉÜ„Ç¥„É™È†Ü</option>
                            </select>
                        </div>
                        <div class="view-controls">
                            <button class="view-btn active" id="viewCards">üìá „Ç´„Éº„ÉâË°®Á§∫</button>
                            <button class="view-btn" id="viewTable">üìä „ÉÜ„Éº„Éñ„É´Ë°®Á§∫</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- „É™„ÇΩ„Éº„ÇπË°®Á§∫„Ç®„É™„Ç¢ -->
            <div class="resources-container">
                <!-- „Ç´„Éº„ÉâË°®Á§∫ -->
                <div class="resources-grid" id="resourcesGrid"></div>

                <!-- „ÉÜ„Éº„Éñ„É´Ë°®Á§∫ -->
                <table class="resources-table" id="resourcesTable">
                    <thead>
                        <tr>
                            <th style="width: 40%;">„Çø„Ç§„Éà„É´</th>
                            <th style="width: 20%;">„Ç´„ÉÜ„Ç¥„É™</th>
                            <th style="width: 40%;">„Çø„Ç∞</th>
                        </tr>
                    </thead>
                    <tbody id="resourcesTableBody"></tbody>
                </table>

                <!-- ÁµêÊûú„Å™„Åó -->
                <div class="no-results" id="noResults" style="display: none;">
                    <h3>üîç ÁµêÊûú„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</h3>
                    <p>„Éï„Ç£„É´„ÇøÊù°‰ª∂„ÇíÂ§âÊõ¥„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- data.js„ÇíË™≠„ÅøËæº„Åø -->
    <script src="data.js"></script>

    <script>
        // data.js„ÅÆcategoriesData„Åã„ÇâÂÖ®„É™„ÇΩ„Éº„Çπ„Éá„Éº„Çø„ÇíÂãïÁöÑ„Å´ÁîüÊàê
        let searchData = [];

        // categoriesData„Åã„ÇâÂÖ®„É™„ÇΩ„Éº„Çπ„ÇíÊäΩÂá∫
        if (typeof categoriesData !== 'undefined') {
            categoriesData.forEach(category => {
                category.sections.forEach(section => {
                    section.resources.forEach(resource => {
                        searchData.push({
                            title: resource.title,
                            category: category.title,
                            file: resource.href
                        });
                    });
                });
            });
        } else {
            console.error('data.js „ÅåÊ≠£„Åó„ÅèË™≠„ÅøËæº„Åæ„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
        }

        // Áä∂ÊÖãÁÆ°ÁêÜ
        let allResources = [];
        let filteredResources = [];
        let activeCategories = new Set();
        let activeServices = new Set();
        let activeTypes = new Set();
        let currentView = 'cards';
        let currentSort = 'title';

        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            initializeResources();
            setupEventListeners();
            renderFilters();
            updateDisplay();
        });

        // „É™„ÇΩ„Éº„ÇπÂàùÊúüÂåñÔºà„Çø„Ç∞ÊäΩÂá∫„Å™„Å©Ôºâ
        function initializeResources() {
            allResources = searchData.map(resource => {
                const tags = extractTags(resource);
                return { ...resource, tags };
            });
            filteredResources = [...allResources];
        }

        // „Çø„Ç∞ÊäΩÂá∫
        function extractTags(resource) {
            const tags = [];
            const title = resource.title.toLowerCase();
            const file = resource.file.toLowerCase();

            // „Çµ„Éº„Éì„ÇπÊ§úÂá∫
            const services = ['ec2', 'lambda', 's3', 'vpc', 'rds', 'aurora', 'dynamodb', 'elasticache',
                            'cloudfront', 'route53', 'direct connect', 'vpn', 'ecs', 'fargate',
                            'api gateway', 'cloudformation', 'cdk', 'sam', 'kinesis', 'redshift',
                            'cognito', 'iam', 'waf', 'config', 'cloudwatch', 'sqs', 'sns',
                            'dms', 'migration hub', 'eventbridge', 'appsync', 'ebs', 'efs'];

            services.forEach(service => {
                if (title.includes(service) || file.includes(service.replace(/\s/g, '-'))) {
                    tags.push(service.toUpperCase().replace(/\s/g, ' '));
                }
            });

            // „Çø„Ç§„ÉóÊ§úÂá∫
            if (title.includes('„Ç§„É≥„Éï„Ç©„Ç∞„É©„Éï„Ç£„ÉÉ„ÇØ') || file.includes('infographic')) {
                tags.push('„Ç§„É≥„Éï„Ç©„Ç∞„É©„Éï„Ç£„ÉÉ„ÇØ');
            }
            if (title.includes('ÂÆåÂÖ®„Ç¨„Ç§„Éâ') || title.includes('„Ç¨„Ç§„Éâ')) {
                tags.push('ÂÆåÂÖ®„Ç¨„Ç§„Éâ');
            }
            if (title.includes('Âõ≥Ëß£')) {
                tags.push('Âõ≥Ëß£');
            }
            if (title.includes('Á∞°ÂçòËß£Ë™¨')) {
                tags.push('Á∞°ÂçòËß£Ë™¨');
            }
            if (title.includes('„ÇØ„Ç§„Ç∫')) {
                tags.push('„ÇØ„Ç§„Ç∫');
            }

            return [...new Set(tags)]; // ÈáçË§áÂâäÈô§
        }

        // „Éï„Ç£„É´„ÇøUI„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        function renderFilters() {
            // „Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„Çø
            const categories = [...new Set(allResources.map(r => r.category))].sort();
            const categoryFilters = document.getElementById('categoryFilters');
            categoryFilters.innerHTML = categories.map(cat => `
                <label class="filter-chip">
                    <input type="checkbox" value="${cat}" onchange="toggleCategoryFilter('${cat}')">
                    <span>${cat}</span>
                </label>
            `).join('');

            // „Çµ„Éº„Éì„Çπ„Éï„Ç£„É´„Çø
            const allTags = allResources.flatMap(r => r.tags);
            const services = [...new Set(allTags.filter(tag =>
                tag.toUpperCase() === tag && tag.length <= 20))].sort();
            const serviceFilters = document.getElementById('serviceFilters');
            serviceFilters.innerHTML = services.map(service => `
                <label class="filter-chip">
                    <input type="checkbox" value="${service}" onchange="toggleServiceFilter('${service}')">
                    <span>${service}</span>
                </label>
            `).join('');

            // „Çø„Ç§„Éó„Éï„Ç£„É´„Çø
            const types = [...new Set(allTags.filter(tag =>
                tag !== tag.toUpperCase() || tag.length > 20))].sort();
            const typeFilters = document.getElementById('typeFilters');
            typeFilters.innerHTML = types.map(type => `
                <label class="filter-chip">
                    <input type="checkbox" value="${type}" onchange="toggleTypeFilter('${type}')">
                    <span>${type}</span>
                </label>
            `).join('');

            // Áµ±Ë®àÊõ¥Êñ∞
            document.getElementById('totalResources').textContent = allResources.length;
            document.getElementById('categoryCount').textContent = categories.length;
            document.getElementById('serviceCount').textContent = services.length;
        }

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö
        function setupEventListeners() {
            // Ê§úÁ¥¢
            document.getElementById('searchInput').addEventListener('input', (e) => {
                applyFilters();
            });

            // „ÇΩ„Éº„Éà
            document.getElementById('sortSelect').addEventListener('change', (e) => {
                currentSort = e.target.value;
                updateDisplay();
            });

            // Ë°®Á§∫ÂàáÊõø
            document.getElementById('viewCards').addEventListener('click', () => {
                currentView = 'cards';
                document.getElementById('viewCards').classList.add('active');
                document.getElementById('viewTable').classList.remove('active');
                updateDisplay();
            });

            document.getElementById('viewTable').addEventListener('click', () => {
                currentView = 'table';
                document.getElementById('viewTable').classList.add('active');
                document.getElementById('viewCards').classList.remove('active');
                updateDisplay();
            });
        }

        // „Éï„Ç£„É´„Çø„Éà„Ç∞„É´
        function toggleCategoryFilter(category) {
            if (activeCategories.has(category)) {
                activeCategories.delete(category);
            } else {
                activeCategories.add(category);
            }
            applyFilters();
        }

        function toggleServiceFilter(service) {
            if (activeServices.has(service)) {
                activeServices.delete(service);
            } else {
                activeServices.add(service);
            }
            applyFilters();
        }

        function toggleTypeFilter(type) {
            if (activeTypes.has(type)) {
                activeTypes.delete(type);
            } else {
                activeTypes.add(type);
            }
            applyFilters();
        }

        // „Éï„Ç£„É´„ÇøÈÅ©Áî®
        function applyFilters() {
            const searchQuery = document.getElementById('searchInput').value.toLowerCase();

            filteredResources = allResources.filter(resource => {
                // Ê§úÁ¥¢„Éï„Ç£„É´„Çø
                const matchesSearch = !searchQuery ||
                    resource.title.toLowerCase().includes(searchQuery);

                // „Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„Çø
                const matchesCategory = activeCategories.size === 0 ||
                    activeCategories.has(resource.category);

                // „Çµ„Éº„Éì„Çπ„Éï„Ç£„É´„Çø
                const matchesService = activeServices.size === 0 ||
                    [...activeServices].some(service => resource.tags.includes(service));

                // „Çø„Ç§„Éó„Éï„Ç£„É´„Çø
                const matchesType = activeTypes.size === 0 ||
                    [...activeTypes].some(type => resource.tags.includes(type));

                return matchesSearch && matchesCategory && matchesService && matchesType;
            });

            updateDisplay();
        }

        // Ë°®Á§∫Êõ¥Êñ∞
        function updateDisplay() {
            // „ÇΩ„Éº„Éà
            const sorted = [...filteredResources].sort((a, b) => {
                if (currentSort === 'title') {
                    return a.title.localeCompare(b.title, 'ja');
                } else {
                    return a.category.localeCompare(b.category, 'ja') ||
                           a.title.localeCompare(b.title, 'ja');
                }
            });

            // Áµ±Ë®àÊõ¥Êñ∞
            document.getElementById('displayedResources').textContent = sorted.length;

            // ÁµêÊûúË°®Á§∫
            const noResults = document.getElementById('noResults');
            const resourcesGrid = document.getElementById('resourcesGrid');
            const resourcesTable = document.getElementById('resourcesTable');

            if (sorted.length === 0) {
                noResults.style.display = 'block';
                resourcesGrid.style.display = 'none';
                resourcesTable.classList.remove('active');
            } else {
                noResults.style.display = 'none';

                if (currentView === 'cards') {
                    resourcesGrid.style.display = 'grid';
                    resourcesTable.classList.remove('active');
                    renderCards(sorted);
                } else {
                    resourcesGrid.style.display = 'none';
                    resourcesTable.classList.add('active');
                    renderTable(sorted);
                }
            }
        }

        // „Ç´„Éº„ÉâË°®Á§∫
        function renderCards(resources) {
            const grid = document.getElementById('resourcesGrid');
            grid.innerHTML = resources.map(resource => `
                <div class="resource-card" onclick="openResource('${resource.file}')">
                    <div class="resource-category">${resource.category}</div>
                    <div class="resource-title">${resource.title}</div>
                    <div class="resource-tags">
                        ${resource.tags.map(tag => `<span class="resource-tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        // „ÉÜ„Éº„Éñ„É´Ë°®Á§∫
        function renderTable(resources) {
            const tbody = document.getElementById('resourcesTableBody');
            tbody.innerHTML = resources.map(resource => `
                <tr onclick="openResource('${resource.file}')">
                    <td>${resource.title}</td>
                    <td><span class="table-category">${resource.category}</span></td>
                    <td>
                        <div class="table-tags">
                            ${resource.tags.map(tag => `<span class="table-tag">${tag}</span>`).join('')}
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // „É™„ÇΩ„Éº„Çπ„ÇíÈñã„Åè
        function openResource(file) {
            window.open(file, '_blank');
        }
    </script>
</body>
</html>
